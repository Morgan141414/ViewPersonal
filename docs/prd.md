# PRD — AI Productivity Hub

## 0) Принципы (обязательно)
Продукт проектируется для **легального и этичного** использования:
- Прозрачность: уведомление, согласие, описанные цели.
- Минимизация: по умолчанию хранить **события/агрегаты**, а не видео.
- Контроль: RBAC, аудит доступа, политики ретеншна.
- Режимы приватности: `anonymous` / `pseudonymous` / `identified`.

## 1) Персоны
- **Сотрудник**: видит свои метрики, рекомендации, приватные настройки (в рамках политики).
- **Руководитель/тимлид**: агрегаты по командам, тренды, алерты.
- **HR/Охрана/Админ**: управление устройствами, политиками, доступами.

## 2) Core-функции (продуктовые)
### 2.1 Присутствие (real-time)
- Онлайн-статус (в офисе/в зоне/на рабочем месте) + история.
- События: `presence.updated`, `zone.entered/exited`.

### 2.2 Видеоаналитика (опционально по политике)
- Идентификация: распознавание лица (если включено).
- Трекинг: person/track continuity, multi-camera (по возможности).
- Поведение: поза/внимание (без «психологической диагностики»).

### 2.3 Indoor positioning
- Wi‑Fi/BLE → зона/уверенность.
- Тепловые карты движения и времени по зонам.

### 2.4 Метрики и KPI
- Метрики активности/присутствия/перерывов.
- KPI-скоринг: правила + (позже) ML.

### 2.5 Рекомендации
- Личные советы (перерыв/фокус/снижение отвлечений) в пределах допустимых сигналов.
- Менеджерские рекомендации только в агрегатах (по политике).

## 3) Dashboard (веб)
- Real-time таблица присутствия.
- Карта офиса (зоны) + «кто где» (в зависимости от уровня приватности).
- Графики: активность по времени, перерывы, тренды.
- Алерты: длительное отсутствие, превышение порога idle, необычные паттерны (без обвинительных формулировок).

## 4) Админка
- Управление сотрудниками/командами/зонами.
- Подключение камер/edge-агентов/маяков.
- Политики приватности и ретеншна.
- Роли и права (RBAC).

## 5) Нефункциональные требования (NFR)
- Latency: цель 0.5–2с для presence updates.
- Надёжность: core API 99.5%+ (на старте), деградация без потери данных.
- Безопасность: TLS, секреты в vault/env, аудит.
- Масштабируемость: N камер и 이해 (зафиксировать пилотные числа).
- Наблюдаемость: метрики/логи/трейсы.

## 6) Данные и хранение
- PostgreSQL: справочники, пользователи, устройства, политики.
- Timescale/Influx: time-series метрики.
- Redis: кэш текущего состояния.
- Event bus: Kafka/RabbitMQ.

## 7) Definition of Done (DoD) для релиза
- Документация: install/run, политики, API.
- Тесты: unit + интеграционные на критический путь.
- Безопасность: базовый threat model, аудит логов, RBAC.
- Демо-сценарий: «камера/сенсор → событие → UI → отчёт».

## 8) Вопросы, которые нужно закрыть для точного плана
1) Локации/масштаб пилота: камеры, сотрудники, офисы?
2) Нужна ли идентификация лиц в MVP или начинаем с anonymous/pseudonymous?
3) Indoor positioning: Wi‑Fi RTT доступен или только RSSI/BLE?
4) Где будет выполняться inference: edge GPU, сервер GPU или CPU?
5) Требования по комплаенсу (страна/политика компании)?
