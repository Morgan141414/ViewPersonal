# Риски, безопасность и конфиденциальность (обязательно для «готового продукта»)

## 1) Главные риски

### 1.1 Юридические/комплаенс
- Биометрия (лицо/эмбеддинги) часто относится к чувствительным данным.
- Требуются: информирование, правовые основания, политика ретеншна, процедуры удаления/экспорта.

### 1.2 Точность и справедливость
- Ошибки распознавания и bias по демографическим группам.
- Риск неверных управленческих решений на основе неточных сигналов.

### 1.3 Социальные и HR‑риски
- Потеря доверия сотрудников, ощущение “тотального контроля”.
- Рекомендации должны быть нейтральными, без обвинений.

### 1.4 Технические
- Real-time нагрузка (много камер) и стоимость GPU.
- Дрейф моделей/условий (освещение/ракурсы).
- Сетевые задержки между edge и core.

## 2) Риски исходных прототипов (что нужно исправить при объединении)
- Секреты/пароли могут быть захардкожены или храниться небезопасно → в продукте только secret manager.
- Простая аутентификация/хранение паролей → в продукте только bcrypt + RBAC/OIDC.
- Локальные файлы (CSV/pickle/SQLite) → в продукте централизованная БД, события и ретеншн.

## 3) Рекомендации по приватности (privacy-by-design)
- **Режимы приватности**:
  - `anonymous`: только track_id, без идентификации
  - `pseudonymous`: псевдо‑id, ограниченный доступ
  - `identified`: person_id, только по строгим ролям
- По умолчанию: не хранить видео; хранить только события/агрегаты.
- Разделить хранилища: эмбеддинги/биометрия отдельно от бизнес‑метрик.
- Политики ретеншна:
  - сырые события коротко,
  - агрегаты и отчёты дольше,
  - биометрия — строго по срокам и доступам.

## 4) Рекомендации по безопасности
- TLS везде (edge→core, client→api).
- RBAC + аудит (кто/когда/что смотрел и экспортировал).
- Шифрование at-rest:
  - Postgres: TDE/диск + шифрование полей для эмбеддингов
  - S3/MinIO: server-side encryption
- Секреты: Vault/Cloud Secrets, ротация.
- Изоляция сетей: edge в отдельном сегменте, core за ingress.
- Hardening контейнеров: non-root, минимальные образы, сканирование.

## 5) Рекомендации по корректной интерпретации ML
- Для behavior/emotion: всегда хранить `confidence` и применять пороги.
- Не делать “диагнозов”; формулировать как «сигнал модели».
- Добавить explainability: почему выставлен KPI (какие метрики/правила).
- Провести пилотную калибровку на конкретном офисе.

## 6) Контроль качества (quality gates)
- Метрики:
  - Face-ID: FAR/FRR, ROC
  - Pose/attention: accuracy/latency
  - End-to-end: 90p latency WS updates
- Мониторинг дрейфа: ухудшение качества по времени/камерам.

## 7) Минимальный набор документов для продакшена
- Политика приватности + согласия + уведомления
- Retention policy + процедуры удаления
- Threat model + security checklist
- Runbooks: инциденты, утечки, отключение идентификации
